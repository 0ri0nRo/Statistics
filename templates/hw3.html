<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Random Walk Simulation with Continuous Jumps</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            padding: 20px;
            background-color: #f4f4f4;
        }
        .container {
            margin-bottom: 20px;
        }
        label {
            display: inline-block;
            width: 150px;
        }
        input[type="number"] {
            width: 100px;
        }
        button {
            padding: 10px 20px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #45a049;
        }
        canvas {
            border: 1px solid black;
            margin-top: 20px;
        }
    </style>
</head>
<body>

    <h1>Random Walk Simulation with Continuous Jumps</h1>
    <div class="container">
        <label for="steps">Number of Steps:</label>
        <input type="number" id="steps" value="100"><br>
        
        <label for="hackers">Number of Paths:</label>
        <input type="number" id="hackers" value="10"><br>
        
        <label for="lambda">Lambda (Rate of Attack):</label>
        <input type="number" id="lambda" value="2.0" step="0.1"><br>
        
        <label for="timeT">Time T (End Time):</label>
        <input type="number" id="timeT" value="10"><br><br>
        
        <button id="runSimulation">Run Simulation</button>
    </div>

    <canvas id="graphCanvas" width="800" height="400"></canvas>

    <script>
        const canvas = document.getElementById('graphCanvas');
        const ctx = canvas.getContext('2d');

        // Function to generate random numbers for Gaussian distribution
        function gaussianRandom(mean = 0, stdev = 1) {
            let u = 1 - Math.random(); // U[0,1) random number
            let v = Math.random();
            let z = Math.sqrt(-2.0 * Math.log(u)) * Math.cos(2.0 * Math.PI * v);
            return z * stdev + mean;
        }

        // Function to simulate continuous jumps based on Lambda
        function continuousJump(lambda, t) {
            return Math.random() < lambda / t ? 1 : 0;
        }

        // Function to simulate the random walk with jumps
        function simulateRandomWalk(steps, hackers, lambda, timeT) {
            let stepX = canvas.width / steps;
            let stepY = canvas.height / steps;

            ctx.clearRect(0, 0, canvas.width, canvas.height);
            ctx.strokeStyle = 'black';
            ctx.lineWidth = 1;

            let totalPoints = [];
            let totalTPoints = [];

            for (let i = 0; i < hackers; i++) {
                let x = 0;
                let y = canvas.height - 10;
                let points = 0;
                let tPoints = 0;

                ctx.beginPath();
                ctx.moveTo(x, y);

                for (let j = 1; j <= steps; j++) {
                    let step = Math.random() < lambda / j ? 1 : 0;
                    let dy = stepY * step;
                    y -= dy;

                    let nextX = j * stepX;
                    ctx.lineTo(nextX, y);

                    points += step;

                    if (j <= timeT) {
                        tPoints += step;
                    }
                }

                ctx.stroke();
                totalPoints.push(points);
                totalTPoints.push(tPoints);
            }

            return { totalPoints, totalTPoints };
        }

        // Function to draw histogram
        function drawHistogram(data, xStart, yStart, stepY, width) {
            let maxCount = Math.max(...data);
            let binWidth = width / data.length;

            ctx.fillStyle = 'rgba(0, 0, 0, 0.6)';
            for (let i = 0; i < data.length; i++) {
                let binHeight = (data[i] / maxCount) * (canvas.height / 2);
                ctx.fillRect(xStart + i * binWidth, yStart - binHeight, binWidth, binHeight);
            }
        }

        // Function to draw the histograms
        function plotHistograms(steps, totalPoints, totalTPoints) {
            let pointsHistogram = new Array(steps + 1).fill(0);
            let tPointsHistogram = new Array(steps + 1).fill(0);

            totalPoints.forEach(val => pointsHistogram[val]++);
            totalTPoints.forEach(val => tPointsHistogram[val]++);

            // Draw left histogram
            let xStartLeft = 10;
            let widthLeft = canvas.width * 0.2;
            let yStart = canvas.height - 10;

            drawHistogram(pointsHistogram, xStartLeft, yStart, steps, widthLeft);

            // Draw right histogram
            let xStartRight = canvas.width - widthLeft - 10;
            drawHistogram(tPointsHistogram, xStartRight, yStart, steps, widthLeft);
        }

        // Event listener to run simulation on button click
        document.getElementById('runSimulation').addEventListener('click', () => {
            const steps = parseInt(document.getElementById('steps').value);
            const hackers = parseInt(document.getElementById('hackers').value);
            const lambda = parseFloat(document.getElementById('lambda').value);
            const timeT = parseInt(document.getElementById('timeT').value);

            const { totalPoints, totalTPoints } = simulateRandomWalk(steps, hackers, lambda, timeT);
            plotHistograms(steps, totalPoints, totalTPoints);
        });
    </script>
</body>
</html>
